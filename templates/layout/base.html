{% load static %}
<!DOCTYPE html>
<html lang="fr" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- Theme init BEFORE paint (avoid flash) -->
  <script>
    (function () {
      try {
        const stored = localStorage.getItem('theme'); // 'light' | 'dark' | null
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = stored || (prefersDark ? 'dark' : 'light');
        const root = document.documentElement;
        root.classList.toggle('dark', theme === 'dark');
        root.classList.toggle('light', theme === 'light');
      } catch (e) {}
    })();
  </script>

  <!-- Title -->
  <title>{% block title %}RH Partners Afric | Externalisation RH, Paie & Intérim{% endblock %}</title>

  <!-- SEO -->
  <meta name="description" content="{% block meta_description %}RH Partners Afric accompagne les entreprises en externalisation RH & paie, recrutement, intérim, conseil RH, formation, coaching et leadership. Solutions fiables, conformes et sur mesure.{% endblock %}">
  <meta name="keywords" content="RH Partners Afric, externalisation RH, paie externalisée, recrutement, intérim, travail temporaire, conseil RH, formation FDFP, coaching, leadership, Côte d’Ivoire, Afrique de l’Ouest">
  <meta name="author" content="RH Partners Afric">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <!-- Canonical -->
  <link rel="canonical" href="{% block canonical %}https://rhpartnersafric.com/{% endblock %}">

  <!-- OpenGraph / Twitter -->
  <meta property="og:site_name" content="RH Partners Afric">
  <meta property="og:locale" content="fr_FR">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{% block og_url %}https://rhpartnersafric.com/{% endblock %}">
  <meta property="og:title" content="{% block og_title %}RH Partners Afric | Externalisation RH & Paie{% endblock %}">
  <meta property="og:description" content="{% block og_description %}Externalisation RH & paie, recrutement, intérim, conseil RH, formation, coaching et leadership.{% endblock %}">
  <meta property="og:image" content="{% block og_image %}https://rhpartnersafric.com/static/assets/og/rhpartners-preview.png{% endblock %}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% block tw_title %}RH Partners Afric | Externalisation RH & Paie{% endblock %}">
  <meta name="twitter:description" content="{% block tw_description %}Recrutement, intérim, conseil RH, formation, coaching, leadership & paie externalisée.{% endblock %}">
  <meta name="twitter:image" content="{% block tw_image %}https://rhpartnersafric.com/static/assets/og/rhpartners-preview.png{% endblock %}">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'assets/icons/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'assets/icons/favicon-16x16.png' %}">
  <link rel="shortcut icon" href="{% static 'assets/icons/favicon.ico' %}">
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'assets/icons/apple-touch-icon.png' %}">

  <!-- PWA -->
  <meta name="theme-color" content="#051536">
  <meta name="color-scheme" content="light dark">
  <link rel="manifest" href="{% static 'manifest.webmanifest' %}">
  <meta name="application-name" content="RH Partners Afric">
  <meta name="apple-mobile-web-app-title" content="RH Partners Afric">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: { nuit: '#051536', gold: '#ffa600' },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            heading: ['Poppins', 'system-ui', 'sans-serif'],
          },
          boxShadow: { 'soft-gold': '0 18px 45px rgba(255,166,0,0.18)' },
        }
      }
    }
  </script>

  <!-- Global styles (light/dark polish) -->
  <style>
    :root { color-scheme: light dark; }
    html, body { height: 100%; }
    body { font-family: Inter, system-ui, sans-serif; }

    /* Better smooth scroll without breaking focus */
    html { scroll-behavior: smooth; }
    :target { scroll-margin-top: 84px; }

    /* Light mode background defaults */
    html.light body {
      background: linear-gradient(180deg, #f8fafc, #ffffff);
      color: #0f172a;
    }
    /* Dark mode background defaults */
    html.dark body {
      background: #020817;
      color: #e2e8f0;
    }

    .heading { font-family: Poppins, system-ui, sans-serif; }

    /* Make "dark:card-glass" usable in light too */
    .card-glass {
      backdrop-filter: blur(18px);
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 0.82));
      border: 1px solid rgba(148, 163, 184, 0.25);
    }
    .card-light {
      backdrop-filter: blur(18px);
      background: rgba(255, 255, 255, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    /* Reveal animation base */
    .reveal { opacity: 0; transform: translateY(24px) scale(0.98); transition: opacity .7s ease, transform .7s ease; }
    .reveal-visible { opacity: 1; transform: translateY(0) scale(1); }

    /* Improve focus accessibility */
    :focus-visible { outline: 2px solid rgba(255,166,0,.9); outline-offset: 3px; border-radius: 12px; }

    {% block extra_css %}{% endblock %}
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body class="min-h-screen flex flex-col">
  <!-- NAV -->
  {% include "layout/nav.html" %}

  <!-- PAGE -->
  <main class="flex-1">
    {% block content %}{% endblock %}
  </main>

  <!-- FOOTER -->
  <footer class="border-t border-slate-200 bg-white py-6 dark:bg-[#020617] dark:border-slate-800/80">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row items-center justify-between gap-3 text-[11px] text-slate-500 dark:text-slate-400">
      <div class="flex items-center gap-2">
        <span class="heading font-semibold text-slate-900 dark:text-slate-100">RH Partners <span class="text-gold">Afric</span></span>
        <span class="hidden sm:inline text-slate-400 dark:text-slate-500">• Externalisation RH & Paie</span>
      </div>
      <div class="flex flex-wrap gap-3 items-center">
        <a href="{/% url 'website:legal' %}" class="hover:text-gold">Mentions légales</a>
        <a href="{/% url 'website:privacy' %}" class="hover:text-gold">Politique de confidentialité</a>
        <span class="text-slate-400 dark:text-slate-500">&copy; <span id="year"></span> RH Partners Afric.</span>
      </div>
    </div>
  </footer>

  <!-- Global JS -->
  <script>
    // YEAR
    (function () {
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
    })();

    // THEME toggle (expects nav button ids, safe if missing)
    (function () {
      const root = document.documentElement;
      const themeToggle = document.getElementById('theme-toggle');
      const sunIcon = document.getElementById('theme-icon-sun');
      const moonIcon = document.getElementById('theme-icon-moon');

      function apply(mode) {
        root.classList.toggle('dark', mode === 'dark');
        root.classList.toggle('light', mode === 'light');
        localStorage.setItem('theme', mode);

        // optional icons
        if (sunIcon && moonIcon) {
          if (mode === 'dark') {
            sunIcon.classList.remove('hidden');
            moonIcon.classList.add('hidden');
          } else {
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
          }
        }
      }

      // Init icons (based on current class)
      const isDark = root.classList.contains('dark');
      if (sunIcon && moonIcon) {
        if (isDark) { sunIcon.classList.remove('hidden'); moonIcon.classList.add('hidden'); }
        else { sunIcon.classList.add('hidden'); moonIcon.classList.remove('hidden'); }
      }

      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          const mode = root.classList.contains('dark') ? 'light' : 'dark';
          apply(mode);
        });
      }
    })();

    // MOBILE MENU (safe)
    (function () {
      const btn = document.getElementById('mobile-menu-btn');
      const menu = document.getElementById('mobile-menu');
      if (!btn || !menu) return;
      btn.addEventListener('click', () => menu.classList.toggle('hidden'));
    })();

    // SMOOTH SCROLL ONLY for in-page anchors (safe)
    (function () {
      document.querySelectorAll('a[href^="#"]').forEach(a => {
        a.addEventListener('click', e => {
          const href = a.getAttribute('href');
          if (!href || href === '#') return;

          const target = document.querySelector(href);
          if (!target) return;

          e.preventDefault();
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });

          const menu = document.getElementById('mobile-menu');
          if (menu && !menu.classList.contains('hidden')) menu.classList.add('hidden');
        });
      });
    })();

    // REVEAL on scroll
    (function () {
      const revealEls = document.querySelectorAll('.reveal');
      if (!revealEls.length) return;

      const obs = new IntersectionObserver((entries, o) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('reveal-visible');
            o.unobserve(entry.target);
          }
        });
      }, { threshold: 0.15 });

      revealEls.forEach(el => obs.observe(el));
    })();

    {% block extra_js %}{% endblock %}
  </script>
</body>
</html>